<!DOCTYPE html>
<html>

<!-- Mirrored from www. .com/prevention/logging-and-monitoring by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 03 Aug 2023 12:48:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  <title>Logging and Monitoring</title>

  <link rel="shortcut icon" type="image/x-icon" href="https://d1o5lmfp4gliop.cloudfront.net/assets/favicon-d2fd4b2666fd6a6c2eacee13d0d844a558942079e549b7f971085de9cab55511.ico" />

  <link rel="apple-touch-icon"                 href="../touch-icon-iphone.png">
  <link rel="apple-touch-icon" sizes="76x76"   href="../touch-icon-ipad.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../touch-icon-iphone-retina.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../touch-icon-ipad-retina.png">

  <meta name="viewport" content="width=device-width">

  <link rel="stylesheet" media="all" href="../../d1o5lmfp4gliop.cloudfront.net/assets/application-1f27c21e9caba5e224e9039708363bb3d6393bcd0cec34182ef97d314c3d7fe1.css" />
  <script src="../../d1o5lmfp4gliop.cloudfront.net/assets/application-9865c3a61c1ffdfed4986c79c8214c39119b9dd0fa2157ea9bdc023c8edbd459.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="QRXeeXl1wJqsGSeL8K+BqTu+g3p6MBbnUUv3MZspJ6DYBVNL+C+gpGE3qgJfF/tO3wcXVG+/Cy4yP5Ng2SJ/Uw==" />

  

  <meta property="og:url"          content="https://www. .com/prevention/logging-and-monitoring" />
<meta property="og:type"         content="website" />
<meta property="og:title"        content="Logging and Monitoring" />
<meta property="og:description"  content="Comprehensive logging and monitoring will tell you what your site is doing at runtime, which is key to spotting security events Let&#39;s learn how to log and monitor your website&#39;s operations. →" />
<meta property="og:image"        content="https://www. .comhttps://d1o5lmfp4gliop.cloudfront.net/images/exercises/logging-and-monitoring/screenshot.png" />
<meta property="og:site_name"    content=" "/>

<meta property="fb:app_id"       content="495778420623064">

<meta name="description"         content="Comprehensive logging and monitoring will tell you what your site is doing at runtime, which is key to spotting security events Let&#39;s learn how to log and monitor your website&#39;s operations. →" />

<meta name="twitter:title"       content="Logging and Monitoring">
<meta name="twitter:description" content="Comprehensive logging and monitoring will tell you what your site is doing at runtime, which is key to spotting security events Let&#39;s learn how to log and monitor your website&#39;s operations. → %>">

<meta name="application-name"                content=" "/>
<meta name="msapplication-TileColor"         content="#000000"/>
<meta name="msapplication-square70x70logo"   content="windows-tiny.png"/>
<meta name="msapplication-square150x150logo" content="windows-square.png"/>
<meta name="msapplication-wide310x150logo"   content="windows-wide.png"/>
<meta name="msapplication-square310x310logo" content="windows-large.png"/>


  



</head>


  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SZ91HC6JB6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-SZ91HC6JB6');
  </script>



<body class="light-background logged-out prevention  unknown_device unknown_browser unknown_browser0 windows non-ie">

  <div class="content">


      <div class="header">
  <nav class="navbar navbar-expand-lg ">

    <div class="container-fluid">
      <button class="navbar-toggler navbar-toggler-right"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapsing-menu">
        <i class="fa fa-bars"></i>
      </button>


      <span class="navbar-brand logo">
        <a href="../index.html">
          <div class="title"> </div>
        </a>
      </span>

      <div class="navbar-collapse collapse justify-content-end" id="collapsing-menu">

        <div class="navbar-nav mr-auto">

        </div>

        <ul class="navbar-nav justify-content-end">


            <li class="nav-item nav-features"><a class="nav-link" href="../features.html">Features</a></li>
            <li class="nav-item nav-lessons"><a class="nav-link" href="../lessons.html">Lessons</a></li>
            <li class="nav-item nav-enterprise"><a class="nav-link" href="../enterprise.html">Enterprise</a></li>
            <li class="nav-item nav-owasp top 10"><a class="nav-link" href="../owasp.html">OWASP Top 10</a></li>
            <li class="nav-item nav-pci compliance"><a class="nav-link" href="../pci.html">PCI Compliance</a></li>
            <li class="nav-item nav-the book"><a class="nav-link" href="../book.html">The Book</a></li>
            <li class="nav-item nav-login"><a class="nav-link" href="../login.html">Login</a></li>
            <li class="nav-item nav-signup"><a class="nav-link" href="../join.html">SignUp</a></li>


        </ul>
      </div>
    </div>

  </nav>
</div>


      
<script>
  hljs.configure({ classPrefix: 'code-' });
  hljs.highlightAll();
</script>

<div class="main reading logging-and-monitoring">

  <div class="container">
    <div class="row prevention-tips has-sponsor">
      <div class="row title modest">
        Logging and Monitoring
      </div>

      <p><strong>Comprehensive logging and monitoring are key to being able to detect what your
site is doing at runtime.</strong> If you do not implement it correctly, you will be
unable to detect when your system is under attack, and you are liable to get
compromised without knowing it.</p>



      <h3 id="risks">Risks</h3>

      <div class="ratings">
  <div class="rating prevalence common">
    <div class="category">
      <span class="category-label">
        Prevalence
      </span>

      <span class="description">
        Common
      </span>
    </div>

    <div class="level">
      <div class="rating-icons prevalence common">
        <img class="on one" src="../../d1o5lmfp4gliop.cloudfront.net/assets/icons/rating-prevelance-on-08c87a35753a8cffcf36b11e7964cfaf357ed53beea25705689f8b289b9260db.png" />
        <img class="on two" src="../../d1o5lmfp4gliop.cloudfront.net/assets/icons/rating-prevelance-on-08c87a35753a8cffcf36b11e7964cfaf357ed53beea25705689f8b289b9260db.png" />
        <img class="on three" src="../../d1o5lmfp4gliop.cloudfront.net/assets/icons/rating-prevelance-on-08c87a35753a8cffcf36b11e7964cfaf357ed53beea25705689f8b289b9260db.png" />
      </div>
   </div>
  </div>

  <div class="rating exploitability moderate">
    <div class="category">
      <span class="category-label">
        Exploitability
      </span>

      <span class="description">
        Moderate
      </span>
    </div>

    <div class="level">
      <div class="rating-icons exploitability moderate"">
        <img class="on one" src="../../d1o5lmfp4gliop.cloudfront.net/assets/icons/rating-exploitability-on-72a414cbfd6607547d507635de7609d1ba1bbfc36e454851949c4efc6fdd6f82.png" />
        <img class="on two" src="../../d1o5lmfp4gliop.cloudfront.net/assets/icons/rating-exploitability-on-72a414cbfd6607547d507635de7609d1ba1bbfc36e454851949c4efc6fdd6f82.png" />
        <img class="on three" src="../../d1o5lmfp4gliop.cloudfront.net/assets/icons/rating-exploitability-on-72a414cbfd6607547d507635de7609d1ba1bbfc36e454851949c4efc6fdd6f82.png" />
      </div>
    </div>
  </div>

  <div class="rating impact harmful">
    <div class="category">
      <span class="category-label">
        Impact
      </span>

      <span class="description">
        Harmful
      </span>
    </div>

    <div class="level">
      <div class="rating-icons impact harmful">
        <img class="on one" src="../../d1o5lmfp4gliop.cloudfront.net/assets/icons/rating-impact-on-56af21599bf07cebbffbecceec1537a9471628fb1d3374433c1d9b8b1ab703bf.png" />
        <img class="on two" src="../../d1o5lmfp4gliop.cloudfront.net/assets/icons/rating-impact-on-56af21599bf07cebbffbecceec1537a9471628fb1d3374433c1d9b8b1ab703bf.png" />
        <img class="on three" src="../../d1o5lmfp4gliop.cloudfront.net/assets/icons/rating-impact-on-56af21599bf07cebbffbecceec1537a9471628fb1d3374433c1d9b8b1ab703bf.png" />
      </div>
    </div>
  </div>
</div>

      <h3 id="logging-in-code">Logging in Code</h3>

<p>Modern programming languages come with logging packages that allow you to 
add lines of text to a log file as the application is running. Taking advantage
of these packages will give you a papertrail of what your application is doing
as users interact with it. Smart use of logging will allow you to spot bugs 
in your code, diagnose incorrect behavior in your  application, troubleshoot 
user issuers, and raise alerts when cyber-attacks occur.</p>

<h5 id="key-elements-in-log-statements">Key Elements in Log Statements</h5>

<p>Each entry written to a log file should contain a <strong>timestamp</strong>, the <strong>log message</strong>, 
and an indication of where in the code the entry is being written from - in 
other words, the <strong>code file</strong> and <strong>line number</strong>. Depending on what type of 
functionality the code is handling, it is also useful to include some of the 
following:</p>

<ul>
  <li>
<strong>The server name</strong> if more than one server is writing to the log file.</li>
  <li>
<strong>The URL, HTTP status code and incoming IP address</strong> if the code is handling an incoming HTTP request.</li>
  <li>
<strong>The username</strong> if the code is being executed in response to an action by a logged-in user.</li>
  <li>
<strong>Timing information</strong> if the code is executing a time-sensitive action.</li>
  <li>
<strong>Diagnostic information</strong> - for instance, if any action had to re-tried, or if a component is responding slowly.</li>
  <li>
<strong>Error messages and stack traces</strong> if an error occurs.</li>
</ul>

<h5 id="what-events-to-log">What Events to Log</h5>

<p>You should log every HTTP request and the corresponding response, being sure to 
include the URL, the HTTP response code, and the time taken to service the 
request. You should also log any significant actions performed by your web 
application, including:</p>

<ul>
  <li>Input validation failures, e.g. when the code encounters unexpected parameter names or values.</li>
  <li>Authentication successes and failures.</li>
  <li>Authorization (access control) failures.</li>
  <li>Session management failures, e.g. when session cookies are rejected as invalid.</li>
  <li>Application errors and system events.</li>
  <li>Startup and shutdown events - including timing information!</li>
  <li>User events like sign-ups, password changes and account deletions.</li>
  <li>Administrative events, e.g. when permissions are changed by an admin.</li>
  <li>Calls to third-party services or APIs.</li>
  <li>Legal and other opt-ins, e.g. when a user accepts the terms of use.</li>
</ul>

<h5 id="what-not-to-log">What Not to Log</h5>

<p>Writing sensitive information to your logs is a security risk - imagine what an
attacker could do if they stole your log files! Make sure your logging 
statements <strong>never</strong> contain any of the following:</p>

<ul>
  <li>User or system passwords.</li>
  <li>Encryption keys.</li>
  <li>Database connection strings.</li>
  <li>API keys for third-party services.</li>
  <li>Personally identifiable information about users.</li>
  <li>Payment information like credit card numbers.</li>
  <li>Sensitive HTTP headers, such as <code>Authorization</code> headers.</li>
  <li>Session IDs or session cookies.</li>
  <li>Access tokens - for example, those used during sign-ups or password resets.</li>
  <li>Information a user has opted out of collection. The “right to be forgotten” is law in many parts of the world, and this includes data in log files.</li>
</ul>

<h5 id="log-levels">Log Levels</h5>

<p>By convention, most logging packages allow you to mark logging statements with 
one of at least four “log levels” - typically named <code>DEBUG</code>, <code>INFO</code>, <code>WARNING</code> 
and <code>ERROR</code>, in order of importance. You should mark each logging statement with 
an appropriate log level to make it easy to filter out the noise in log files. 
Servers can be configured so only statements marked with a particular log level 
are written to the log file: a server configured with the  <code>INFO</code> 
log-level will write <code>INFO</code>, <code>WARNING</code> <em>and</em> <code>ERROR</code> messages to the log file, 
but omit <code>DEBUG</code> messages.</p>

<p>Low-level diagnostic events should be marked as <code>DEBUG</code> statements, and 
typically only show up in non-production environments. The <code>INFO</code> log level 
should be used for normal running: the events expected to occur when users 
interact with your website. Unexpected events should be logged with the 
<code>WARNING</code> level, and errors should be marked with the <code>ERROR</code> log level.</p>




      <h3 id="other-types-of-logging">Other Types of Logging</h3>

<p>In addition to the logging statements added to your code, other applications in
your stack will typically output log files. A web server like Apache, Nginx or
IIS will log HTTP request and response information. Databases will typically
write log files too, which are useful for diagnosing performance issues. Make
sure your team has access to these logs too when diagnosing issues.</p>

<h3 id="log-aggregation-and-storage">Log Aggregation and Storage</h3>

<p>Logs should be centralized and stored securely so they can be viewed by 
administrators. “Log servers” like LogStash, Graylog, Splunk and PaperTrail
will aggregate log files from different sources and allow them to be searched
and analyzed in realtime. Log servers are often available as services, and
can be added as plug-ins if you run on cloud-based services.</p>

<h3 id="monitoring">Monitoring</h3>

<p>Logging should be paired with <em>monitoring</em>, the process of continuously 
assessing whether your site is running as expected.  Monitoring software often 
pulls key “metrics” from log files to diagnose the  health of a web application.
Let’s discuss the various ways you can monitor your application.</p>

<h5 id="uptime-monitoring">Uptime Monitoring</h5>

<p>The most basic form of monitoring is checking that your site is available. 
“Uptime monitors” like Uptime Robot and Pingdom are free services that will 
check whether a URL is responding to HTTP requests successfully. (More complex 
or frequent checks are usually available as a paid option.) This is a simple way 
to achieve peace-of-mind: if your site ever becomes unavailable, the monitoring 
software will send an email or text alert to your team.</p>

<h5 id="error-reporting">Error Reporting</h5>

<p>Capturing unexpected errors that occur on your website is key to detecting 
cyber-attacks and ensuring software quality. Errors conditions can
either be extracted from log files, or recorded using plug-ins provided by
services like Rollbar or Airbrake. Error reporting services even allow you to
capture error conditions that occur in JavaScript in the browser, which 
typically won’t appear in server-side logs.</p>

<h5 id="performance-metrics">Performance Metrics</h5>

<p>Capturing performance metrics will give you granular information about the state
of your web application. Your monitoring should keep track of:</p>

<ul>
  <li>
<strong>Responsiveness</strong>: how long it takes to respond to each web request.</li>
  <li>
<strong>Throughput</strong>: how many requests per second are hitting your site.</li>
  <li>
<strong>Memory usage and server load</strong>: how much of each server’s memory space is being used up, and how close each server is to full capacity.</li>
  <li>
<strong>Database performance</strong>: how many queries are being run per second and how many concurrent connections there are.</li>
</ul>

<h5 id="alerting">Alerting</h5>

<p>You should configure your monitoring software to alert your team when unusual
errors occur or when performance metrics reach critical conditions. Alerts can
be sent over email, instant messaging or text. Large organizations will have
support rotas, so at least one engineer is available to respond to alerts at all
times.</p>

<h5 id="response-plans">Response Plans</h5>

<p>Being alerted to errors is only useful if there are actions your support 
engineers can undertake to fix the error condition! Make sure you put together
a trouble-shooting plan for a responding engineer to follow, and keep it up to
date as you develop your system.</p>

<p>Troubleshooting steps may consist of restarting servers, adding extra servers in
times of high load, blocking IP addresses when you see malicious traffic, or 
escalating to team specialists (like network engineers and database 
administrators) when particular parts of the application appear to be the 
problem. If the issue starts to affect users, making an announcement on a status 
page or in a website banner will earn you goodwill.</p>

<h3 id="further-reading">Further Reading</h3>

<ul>
  <li><a href="https://cheatsheetseries.owasp.org/cheatsheets/Logging_Cheat_Sheet.html">OWASP cheat sheet for logging and monitoring</a></li>
  <li><a href="https://www.pcisecuritystandards.org/documents/Effective-Daily-Log-Monitoring-Guidance.pdf">PCI Security Standards for effective logging and monitoring</a></li>
</ul>


    </div>

      



  </div>


    <div class="container">
      <div class="row quiz-link">
        <a href="../joinff05.html?next=%2Fquiz%2Flogging-and-monitoring">
          <div class="link-question">
            Got all that?
          </div>

          <div class="link-link">
            Test Yourself →
          </div>

          <div class="link-caption">
            <div>Take our quiz to make sure everything is clear</div>
          </div>
</a>      </div>
    </div>



</div>

      
  <footer class="regular">
  <div class="container">
    <ul>
      <li>
        <a href="../lessons.html">Lessons</a>
      </li>
      <li>
        <a href="../glossary.html">Glossary</a>
      </li>
      <li>
        <a href="../privacy.html">Privacy</a>
      </li>
      <li>
        <a href="../legal.html">Legal</a>
      </li>

      <li class="pull-right copyright">
          <a class="contact-us"
             title="Get in touch"
             href="mailto:question@ .com"
             rel="noopener noreferrer">
            <span class="fa-stack">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
            </span>
          </a>

        <a href="../index.html">
          <span style="font-family: 'Oxygen'">©</span> 2023  
</a>      </li>
    </ul>
  </div>
</footer>



  </div>

    <script src="../../d1o5lmfp4gliop.cloudfront.net/assets/cookieinfo-1af9cc137c2c2bc8ea4d469f45d357ec43dc6c23537bd0c96aa9b51ff416ce5e.js" id="cookieinfo"></script>

</body>

<script>
  $(function () {
    $('[data-bs-toggle="tooltip"]').tooltip({ container: 'body' });
  });
</script>


<!-- Mirrored from www. .com/prevention/logging-and-monitoring by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 03 Aug 2023 12:48:13 GMT -->
</html>
